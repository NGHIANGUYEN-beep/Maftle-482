<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Maftle Main Page</title>
    <link rel="icon" type="image/png" href="/static/icon.png">
    <link rel="stylesheet" href="/static/styles.css">
    <link rel="stylesheet" href="/static/homepage.css">
</head>
<body>
    <!-- top right welcome -->
    <div id="welcome" class="top-right"></div>

    <div class="button-container">
        <img src="/static/Maftle.png">
        <a href="/gamepage.html"><button class="button-container">Play Daily Mode</button></a>
        <a href="/gamepage.html"><button class="button-container">Play Infinite Mode</button></a>
        <div class="split-container">
            <button id="authButton"></button>
            <a href="/statspage.html"><button class="split-container">Stats</button></a>
        </div>
    </div>
    <script>
    // Dynamic Login/Logout button updater
    async function updateButton() {
        const response = await fetch("/auth/status");
        const data = await response.json();
        
        const button = document.getElementById("authButton");
        const welcome = document.getElementById("welcome");

        if (data.logged_in) {
            welcome.innerText = `Welcome, ${data.username}!`;
            button.textContent = "Logout";
            button.onclick = () => window.location.href = "/logoutpage.html";
        } else {
            welcome.innerText = "You are not logged in.";
            button.textContent = "Login";
            button.onclick = () => window.location.href = "/loginpage.html";
        }
    }
    // Run on page load
    updateButton();
    </script>
</body>
</html>
